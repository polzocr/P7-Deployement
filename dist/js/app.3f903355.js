(function(){"use strict";var t={4282:function(t,e,s){var i=s(8935),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[t.connected()?i("div",{staticClass:"bodyPage"},[i("div",{attrs:{id:"sidemenu"}},[i("div",{staticClass:"sidemenu__nav"},[i("button",{staticClass:"sidemenu__btn",class:{active:t.navOpen},on:{blur:function(e){t.navOpen=!1},click:function(e){t.navOpen=!t.navOpen}}},[i("span",{staticClass:"top"}),i("span",{staticClass:"mid"}),i("span",{staticClass:"bottom"})]),i("div",{staticClass:"sidemenu__logo"},[i("router-link",{staticClass:"top__logo__img",attrs:{to:"/"}},[i("img",{attrs:{src:s(3649),alt:"icone-groupomania"}})])],1)]),i("transition",{attrs:{name:"translateX"}},[i("nav",{directives:[{name:"show",rawName:"v-show",value:t.navOpen,expression:"navOpen"}]},[i("div",{staticClass:"sidemenu__wrapper"},[i("div",{staticClass:"sidemenu__create"},[i("router-link",{staticClass:"sidemenu__create__link",attrs:{to:"/createpost"}},[i("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),i("p",[t._v("Créer un article")])])],1),i("div",{staticClass:"sidemenu__user"},[i("router-link",{staticClass:"sidemenu__user__link",attrs:{to:{name:"Profile",params:{id:this.$store.state.user.userId}}}},[i("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}),i("p",[t._v("Votre profile")])]),t.isAdmin()?i("router-link",{staticClass:"sidemenu__user__link",attrs:{to:"/users"}},[i("i",{staticClass:"fa fa-lock",attrs:{"aria-hidden":"true"}}),i("p",[t._v("Page Admin")])]):t._e(),i("router-link",{staticClass:"sidemenu__user__link",attrs:{to:""},nativeOn:{click:function(e){return t.deconnexion()}}},[i("i",{staticClass:"fa fa-arrow-right",attrs:{"aria-hidden":"true"}}),i("p",[t._v("Se Deconnecter")])])],1)])])])],1),i("router-view")],1):i("div",{staticClass:"login"},[i("div",{staticClass:"login__element"},[i("div",{staticClass:"login__element__nav"},[i("div",{staticClass:"navigation left",class:{active:t.loginPage()}},[i("router-link",{attrs:{to:"/login",id:"login--signup"}},[i("i",{staticClass:"fa fa-user-circle"}),t._v("Se connecter")])],1),i("div",{staticClass:"navigation",class:{active:t.signupPage()}},[i("router-link",{attrs:{to:"/signup",id:"login--signup"}},[i("i",{staticClass:"fa fa-list-alt",attrs:{"aria-hidden":"true"}}),t._v("S'inscrire")])],1)]),i("router-view")],1)])])},r=[],o={name:"App",data:function(){return{navOpen:!1}},computed:{},methods:{loginPage(){return"/login"==this.$route.path},signupPage(){return"/signup"==this.$route.path},connected(){const t=JSON.parse(localStorage.getItem("user"));return!(!t||this.$store.state.user.userId!=t.userId)},deconnexion(){this.$store.dispatch("deconnexion",{userId:-1,token:""}),this.$router.push("/login")},isAdmin(){const t=JSON.parse(localStorage.getItem("user"));return 1==t.userId}}},n=o,l=s(1001),u=(0,l.Z)(n,a,r,!1,null,null,null),m=u.exports,c=s(2809),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("div",{staticClass:"scrollTop",class:{visibility:t.visible}},[s("button",{staticClass:"btn",on:{click:function(e){return t.topOrFeed()}}},[s("i",{staticClass:"fa fa-arrow-up",attrs:{"aria-hidden":"true"}})])]),t._l(t.postsReverse,(function(e,i){return s("PostComp",{key:i,attrs:{modify:t.modify,id:e.id,userId:e.userId,created_at:e.createdAt,user:e.User,title:e.name,text:e.text,image_url:e.image_url,nbComments:e.Comments,likes:e.Likes},on:{Commenting:t.CommentRequest,modify:t.getToPost}})}))],2)},p=[],h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"home"},[s("section",{staticClass:"homePost"},[s("div",{staticClass:"homePost__title"},[t.user?s("p",{attrs:{id:"names"}},[t._v(t._s(t.user.firstName)+" "+t._s(t.user.lastName))]):t._e(),s("p",{attrs:{id:"post-title"}},[t._v(t._s(t.title))]),s("div",{attrs:{id:"delete__flexbox"}},[s("p",[t._v(t._s(t.date())+" ")]),t.ownPost()?s("div",{staticClass:"dropdown"},[t._m(0),s("div",{staticClass:"dropdown__content"},[s("button",{staticClass:"btn btn-delete",on:{click:function(e){e.preventDefault(),t.showModal=!0}}},[s("i",{staticClass:"fa fa-pen",attrs:{"aria-hidden":"true"}})]),s("button",{staticClass:"btn btn-delete",on:{click:function(e){return e.preventDefault(),t.DeleteRequest()}}},[s("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})])])]):t._e()]),t.showModal?s("Modal",{attrs:{id:this.id,userId:this.userId,title:this.title,text:this.text,image_url:this.image_url},on:{close:function(e){t.showModal=!1}}}):t._e()],1),s("div",{staticClass:"homePost__text"},[s("p",[t._v(" "+t._s(t.text)+" ")])]),null!==this.image_url?s("div",{staticClass:"homePost__image"},[s("img",{attrs:{src:t.image_url,alt:"imagePost"}})]):t._e(),s("div",{staticClass:"homePost__footer"},[s("div",{staticClass:"homePost__footer__comment"},[s("i",{staticClass:"fa fa-comment btn-normal",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.showComments()}}}),t.nbComments?s("p",{attrs:{id:"nbComments"}},[t._v(t._s(t.nbComments.length))]):t._e()]),t.likes&&t.like()?s("div",{staticClass:"homePost__footer__like"},[s("div",{staticClass:"homePost__footer__like__like"},[s("i",{staticClass:"fa fa-thumbs-up",class:this.liked?"btn-like":"btn-unlike none",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.LikePostRequest(2)}}}),s("p",[t._v(" "+t._s(t.nbLikes()))])]),s("div",{staticClass:"homePost__footer__like__dislike"},[s("i",{staticClass:"fa fa-thumbs-down",class:this.liked?"btn-unlike none":"btn-like",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.LikePostRequest(0)}}}),s("p",[t._v(" "+t._s(t.nbDislikes()))])])]):t._e(),t.likes&&!t.like()?s("div",{staticClass:"homePost__footer__like"},[s("div",[s("i",{staticClass:"fa fa-thumbs-up btn-unlike liked",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.LikePostRequest(1)}}}),s("p",[t._v(t._s(t.nbLikes()))])]),s("div",[s("i",{staticClass:"fa fa-thumbs-down btn-unlike liked",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.LikePostRequest(-1)}}}),s("p",[t._v(t._s(t.nbDislikes()))])])]):t._e()]),s("div",{staticClass:"homePost__comment"},[s("div",{staticClass:"homePost__comment__input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.textComment,expression:"textComment"}],attrs:{id:"textComment",type:"text",placeholder:"Votre commentaire"},domProps:{value:t.textComment},on:{input:function(e){e.target.composing||(t.textComment=e.target.value)}}})]),s("div",{staticClass:"homePost__comment__button"},[s("button",{staticClass:"btn btn-comment",class:{disabled:t.isDisabled()},on:{click:function(e){return e.preventDefault(),t.CommentRequest()}}},[t._v("Commenter")])])]),t.showComment&&0!==t.nbComments.length?s("section",{staticClass:"commentsPage"},t._l(this.comments,(function(t,e){return s("CommentComp",{key:e,attrs:{firstName:t.UserFirstName,lastName:t.UserLastName,text:t.text,created_at:t.created_at}})})),1):t._e()])])},f=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"btn btn-delete dropdown__icon"},[s("i",{staticClass:"fa fa-ellipsis-h",attrs:{"aria-hidden":"true"}})])}],_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"comments"},[s("div",{staticClass:"comments__title"},[s("p",{attrs:{id:"name"}},[t._v(t._s(t.firstName)+" "+t._s(t.lastName))]),s("p",{attrs:{id:"date"}},[t._v(t._s(t.date()))])]),s("div",{staticClass:"comments__text"},[s("p",[t._v(t._s(t.text)+" ")])])])},g=[],v={name:"CommentComp",props:{firstName:{type:String},lastName:{type:String},text:{type:String},created_at:{type:String}},data:function(){return{exist:!1}},methods:{date(){if("undefined"!==typeof this.created_at){const t=this.created_at.split("T")[0],e=t.split("-")[2],s=t.split("-")[1],i=t.split("-")[0];return e+"/"+s+"/"+i}}},computed:{}},C=v,b=(0,l.Z)(C,_,g,!1,null,null,null),y=b.exports,k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"modal-transition"}},[s("div",{staticClass:"modal"},[s("form",{staticClass:"modal__box",attrs:{enctype:"multipart/form-data"}},[s("div",{staticClass:"modal__box__title"},[s("input",{attrs:{id:"title",type:"text"},domProps:{value:t.title}}),s("button",{staticClass:"btn btn-close",on:{click:function(e){return t.$emit("close")}}},[s("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),s("div",{staticClass:"modal__box__text"},[s("textarea",{attrs:{id:"text",rows:"5",cols:"60"},domProps:{value:t.text}})]),null!==this.image_url?s("div",{staticClass:"modal__box__image"},[s("img",{attrs:{src:t.image_url,alt:"image_PutRequest"}})]):t._e(),s("div",{staticClass:"modal__box__file"},[s("label",{staticClass:"btn upload",attrs:{for:"upload"}},[t._v("Choisir un fichier")]),s("input",{ref:"fileInput",attrs:{id:"upload",type:"file",accept:"image/*",name:"image"},on:{change:function(e){return t.changeFile()}}})]),s("div",{staticClass:"modal__box__btn"},[s("button",{staticClass:"btn btn-modal",on:{click:function(e){return e.preventDefault(),t.ModifyRequest()}}},[t._v("Modifier")]),s("button",{staticClass:"btn btn-modal",on:{click:function(e){return e.preventDefault(),t.DeleteRequest()}}},[t._v("Supprimer")])])])])])},x=[],P=(s(6699),{name:"ModalComp",data:function(){return{getDisabled:!1,error:!1}},props:{id:{type:Number,required:!0,default:0},userId:{type:Number,required:!0,default:0},title:{type:String},text:{type:String},image_url:{type:String}},methods:{isDisabled(){const t=document.getElementById("title").value;return this.getDisabled=""==t},changeFile(){const t=this.$refs.fileInput.files[0],e={"image/jpg":"jpg","image/jpeg":"jpg","image/png":"png","image/gif":"gif"};Object.keys(e).includes(t.type)?(this.error=!1,this.file=t):(this.error=!0,alert("Uniquement les images et les gifs sont acceptés"))},ModifyRequest(){const t=JSON.parse(localStorage.getItem("user")),e=document.getElementById("title").value,s=document.getElementById("text").value,i={image:this.file,name:e,text:s,id:this.id};""!==e&&0==this.error?t.userId!==this.userId?this.$router.push("/login"):this.$store.dispatch("PutPostRequest",{data:i}):(document.getElementById("title").placeholder="Le titre est indispensable",alert("Uniquement les images et les gifs sont acceptés"))},DeleteRequest(){const t=JSON.parse(localStorage.getItem("user"));t.userId!==this.userId?this.$router.push("/login"):confirm("Vous-vous supprimer cet article ?")&&this.$store.dispatch("DeleteRequest",{id:this.id})}}}),N=P,w=(0,l.Z)(N,k,x,!1,null,null,null),I=w.exports,$=s(6166),q=s.n($),R={name:"PostComp",components:{CommentComp:y,Modal:I},props:{modify:{type:Boolean,default:()=>!1},clickable:{type:Boolean,default:()=>!0},id:{type:Number,required:!0,default:0},userId:{type:Number,required:!0,default:0},created_at:{type:String},nbComments:{type:Array},user:{type:Object},likes:{type:Array},title:{type:String},text:{type:String},image_url:{type:String}},data:function(){return{localName:this.title,localText:this.text,file:this.image_url,idPost:"",showComment:!1,textComment:"",comments:[{}],showModal:!1,liked:-1}},computed:{},created(){},methods:{nbLikes(){let t=0;return this.likes.forEach((e=>{1==e.stateLike&&(t+=1)})),t},nbDislikes(){let t=0;return this.likes.forEach((e=>{0==e.stateLike&&(t+=1)})),t},like(){const t=JSON.parse(localStorage.getItem("user"));let e=!1;return 0!==this.likes.length&&(this.likes.forEach((s=>{s.userId==t.userId&&(this.liked=s.stateLike,e=!0)})),e)},LikePostRequest(t){-1==t||1==t?this.$store.dispatch("LikePostRequest",{id:this.id,like:t}):(2==t&&this.liked||0==t&&!this.liked)&&this.$store.dispatch("LikePostRequest",{id:this.id,like:0})},date(){if("undefined"!==typeof this.created_at){const t=this.created_at.split("T")[0],e=t.split("-")[2],s=t.split("-")[1],i=t.split("-")[0];return e+"/"+s+"/"+i}},CommentRequest(){""!==this.textComment&&this.$store.dispatch("CreateCommentRequest",{PostId:this.id,text:this.textComment})},isDisabled(){return""==this.textComment},showComments(){if(0!==this.nbComments.length){this.comments=[{}];const t=JSON.parse(localStorage.getItem("user")),e=q().create({baseURL:"http://localhost:3000/"});e.defaults.headers.common["Authorization"]="Bearer "+t.token,e.get("/"+this.id+"/comments").then((t=>{t.data.forEach((t=>{this.comments.push({UserFirstName:t.User.firstName,UserLastName:t.User.lastName,text:t.text,created_at:t.createdAt})}))})).then((()=>{this.showComment=!this.showComment})).catch((t=>console.log(t))).catch((t=>console.log(t,"Insuccès de lappel des commentaires")))}},ownPost(){const t=JSON.parse(localStorage.getItem("user"));return this.userId==t.userId},modifyComp(){const t=this.$route.params.id,e=this.id;return console.log("--------------------"),console.log("paramsId: "+t),console.log("id: "+e),t==e&&this.ownPost()?(console.log("true"),!0):void 0==t?(console.log("false"),!1):void console.log("REDIRIRECTION")},emitModify(){const t=document.getElementById("title").value,e=document.getElementById("text").value,s={image:this.file,title:t,text:e,id:this.$route.params.id};this.$emit("Modifying",{data:s})},changeFile(){this.file=this.$refs.fileInput.files[0]},emitDelete(){this.$store.dispatch("DeleteRequest",{id:this.id})},emitComment(){const t=document.getElementById("textComment").value;this.$emit("Commenting",{PostId:this.id,text:t})},DeleteRequest(){confirm("Vous-vous supprimer cet article ?")&&this.$store.dispatch("DeleteRequest",{id:this.id})},GetToPost(){this.$store.state.postUserId=this.userId,this.$router.push("/post/"+this.id)},ModifyRequest(){const t=document.getElementById("title").value,e=document.getElementById("text").value,s={image:this.file,title:t,text:e,id:this.$route.params.id};this.$store.dispatch("PutPostRequest",{data:s})}}},S=R,E=(0,l.Z)(S,h,f,!1,null,null,null),D=E.exports,L={name:"HomeView",components:{PostComp:D},data:function(){return{idLocal:this.$route.params.id,modify:!1,visible:!1}},beforeCreate(){this.$store.dispatch("GetPostsRequest")},created(){window.addEventListener("scroll",(()=>{window.scrollY>600?this.visible=!0:this.visible=!1}))},mounted(){},methods:{CreateRequest(){this.$store.dispatch()},CommentRequest(t){this.$store.dispatch("CreateCommentRequest",t)},getToPost(t){this.$router.push("/"+t.postId)},topOrFeed(){window.scrollTo(0,0)}},computed:{postsReverse(){return this.$store.state.posts.slice().reverse()}}},U=L,O=(0,l.Z)(U,d,p,!1,null,null,null),A=O.exports,V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"composant"},[s("form",{staticClass:"composant__form",attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.LoginRequest.apply(null,arguments)}}},[s("div",{staticClass:"form log"},[s("div",{staticClass:"form__input"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.email,expression:"email",modifiers:{trim:!0}}],attrs:{type:"email",name:"email",placeholder:"E-mail"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("div",{staticClass:"form__input"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.password,expression:"password",modifiers:{trim:!0}}],attrs:{type:"password",name:"password",placeholder:"Mot de passe"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.haveError()?s("p",[t._v(" "+t._s(t.$store.state.error)+" ")]):t._e()]),s("div",{},[s("button",{staticClass:"btn form__button",class:{disabled:t.isDisabled()},attrs:{type:"submit"},on:{blur:function(e){return t.cleanStore()}}},["loading"==t.$store.state.status?s("span",[t._v("Connexion en cours...")]):s("span",[t._v("Se connecter")])])])])]),t._m(0)])},Z=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"logo"},[i("img",{attrs:{src:s(5515),alt:"logo-groupomania"}})])}],B={name:"LoginView",data:function(){return{email:"",password:""}},mounted(){},computed:{},methods:{haveError(){return!!this.$store.state.error},cleanStore(){this.$store.commit("clearError")},isDisabled(){return""==this.email||""==this.password},LoginRequest(){""!==this.email&&""!==this.password&&this.$store.dispatch("LoginRequest",{email:this.email,password:this.password})}}},M=B,j=(0,l.Z)(M,V,Z,!1,null,null,null),J=j.exports,T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"composant"},[s("form",{staticClass:"composant__form",attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.SignupRequest.apply(null,arguments)}}},[s("div",{staticClass:"form signup"},[s("div",{staticClass:"form__input"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.lastName,expression:"lastName",modifiers:{trim:!0}}],attrs:{type:"text",name:"lastName",placeholder:"Nom"},domProps:{value:t.lastName},on:{input:[function(e){e.target.composing||(t.lastName=e.target.value.trim())},function(e){return t.testLastName()}],blur:function(e){return t.$forceUpdate()}}}),t.errorLastName?s("p",{staticClass:"error"},[t._v(t._s(t.errorLastName))]):t._e()]),s("div",{staticClass:"form__input"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.firstName,expression:"firstName",modifiers:{trim:!0}}],attrs:{type:"text",name:"firstName",placeholder:"Prénom"},domProps:{value:t.firstName},on:{input:function(e){e.target.composing||(t.firstName=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("div",{staticClass:"form__input"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.email,expression:"email",modifiers:{trim:!0}}],attrs:{type:"email",name:"email",placeholder:"E-mail"},domProps:{value:t.email},on:{input:[function(e){e.target.composing||(t.email=e.target.value.trim())},function(e){return t.testEmail()}],blur:function(e){return t.$forceUpdate()}}}),t.errorEmail?s("p",{staticClass:"error"},[t._v(t._s(t.errorEmail))]):t._e()]),s("div",{staticClass:"form__input"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.password,expression:"password",modifiers:{trim:!0}}],attrs:{type:"password",name:"password",placeholder:"Mot de passe"},domProps:{value:t.password},on:{input:[function(e){e.target.composing||(t.password=e.target.value.trim())},function(e){return t.testPassword()}],blur:function(e){return t.$forceUpdate()}}}),t.errorPassword?s("p",{staticClass:"error"},[t._v(t._s(t.errorPassword))]):t._e()]),s("div",{},[s("button",{staticClass:"btn form__button btn-signup",class:{disabled:t.isDisabled()},attrs:{type:"submit",disabled:t.isDisabled()}},["loading"==t.$store.state.status?s("span",[t._v("Création en cours...")]):s("span",[t._v("S'enregistrer")])]),t.errorValidation?s("p",{staticClass:"error"},[t._v(" "+t._s(t.errorValidation))]):t._e()])])]),t._m(0)])},z=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"logo"},[i("img",{attrs:{src:s(5515),alt:"logo-groupomania"}})])}],F={name:"SignupView",data:function(){return{firstName:"",lastName:"",email:"",password:"",errorLastName:"",errorEmail:"",errorPassword:"",errorValidation:""}},computed:{},mounted(){},methods:{testPassword(){const t=/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$ %^&*-]).{8,}$/;return t.test(this.password)?(this.errorPassword="",this.errorValidation="",!0):(this.errorPassword="Le mot de passe est trop simple",!1)},testEmail(){const t=/^(([^<>()\]\\.,;:\s@"]+(\.[^<>()\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(this.email)?(this.errorEmail="",this.errorValidation="",!0):(this.errorEmail="Ce n'est pas une email valide",!1)},testLastName(){const t=/^[a-zA-Zàáâäãåąčćęèéêëėįìíîïłńòóôöõùúûüųūÿýżźñç ,.'-]+$/u;return t.test(this.lastName)?(this.errorLastName="",this.errorValidation="",!0):(this.errorLastName="Le nom doit être correct",!1)},isDisabled(){return""==this.lastName||""==this.email||""==this.password},SignupRequest(){this.testPassword()&&this.testEmail()&&this.testLastName()&&!this.isDisabled()?(this.errorValidation="",this.$store.dispatch("SignupRequest",{lastName:this.lastName,firstName:this.firstName,email:this.email,password:this.password})):this.errorValidation="Veuillez remplir correctement vos informations personnelles"}}},G=F,H=(0,l.Z)(G,T,z,!1,null,null,null),X=H.exports,Y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("section",{attrs:{id:"test"}},[s("form",{attrs:{enctype:"multipart/form-data"}},[s("div",[s("input",{attrs:{id:"name",type:"text"},domProps:{value:t.post.name}})]),s("div",[s("input",{attrs:{id:"text",type:"textarea"},domProps:{value:t.post.text}})]),s("div",[s("div",[s("img",{attrs:{src:t.post.image_url,alt:"image_PutRequest"}})]),s("div",[s("input",{ref:"fileInput",attrs:{type:"file",accept:"image/*",name:"image"},on:{change:function(e){return t.changeFile()}}})])]),s("div",[s("button",{on:{click:function(e){return e.preventDefault(),t.ModifyRequest()}}},[t._v("Modifier")])]),s("div",[s("button",{on:{click:function(e){return e.preventDefault(),t.DeleteRequest()}}},[t._v("Supprimer")])])])])])},K=[],Q=s(4665),W={name:"PostView",data:function(){return{modify:!1,newPost:{name:"",text:"",image_url:""}}},computed:{...(0,Q.rn)(["post"])},methods:{ownPost(){const t=JSON.parse(localStorage.getItem("user"));return this.post.userId==t.userId},modifier(){this.modify=!this.modify},ModifyRequest(){const t=document.getElementById("name").value,e=document.getElementById("text").value,s={image:this.file,name:t,text:e,id:this.$route.params.id};this.$store.dispatch("PutPostRequest",{data:s})},DeleteRequest(){confirm("Vous-vous supprimer cet article ?")&&this.$store.dispatch("DeleteRequest",{id:this.post.id})},changeFile(){this.file=this.$refs.fileInput.files[0],console.log(this.name),console.log(this.localName)},CommentRequest(t){this.$store.dispatch("CreateCommentRequest",t)}},beforeMount(){const t=JSON.parse(localStorage.getItem("user"));t.userId!==this.$store.state.postUserId?this.$router.push("/login"):this.$store.dispatch("GetPostRequest",this.$route.params.id)}},tt=W,et=(0,l.Z)(tt,Y,K,!1,null,null,null),st=et.exports,it=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"createPost"},[s("form",{staticClass:"createPost__form",attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.PostRequest.apply(null,arguments)}}},[s("div",{staticClass:"createPost__form__title"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",placeholder:"Titre"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),s("div",{staticClass:"createPost__form__text"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{rows:"5",cols:"60",placeholder:"Votre texte"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}})]),s("div",{staticClass:"createPost__form__file"},[s("label",{staticClass:"btn upload",attrs:{for:"upload"}},[t._v("Choisir un fichier")]),s("input",{ref:"fileInput",attrs:{id:"upload",type:"file",accept:"image/*",name:"image"},on:{change:function(e){return t.changeFile()}}})]),s("div",{staticClass:"createPost__form__button"},[s("button",{staticClass:"btn",class:{disabled:t.isDisabled()},attrs:{type:"submit"}},[t._v("Créer votre article")])])])])},at=[],rt={name:"CreateView",data:function(){return{title:"",text:"",file:"",error:!1}},methods:{changeFile(){const t=this.$refs.fileInput.files[0],e={"image/jpg":"jpg","image/jpeg":"jpg","image/png":"png","image/gif":"gif"};Object.keys(e).includes(t.type)?(this.error=!1,this.file=t):(this.error=!0,alert("Uniquement les images et les gifs sont acceptés"))},PostRequest(){const t={image:this.file,name:this.title,text:this.text,userId:this.$store.state.user.userId};this.isDisabled()||0!=this.error||this.$store.dispatch("PostPostRequest",{data:t})},isDisabled(){return""==this.title||1==this.error}},beforeCreate(){const t=JSON.parse(localStorage.getItem("user"));if(!t||this.$store.state.user.userId!==t.userId)return console.log(t),void this.$router.push("/login")}},ot=rt,nt=(0,l.Z)(ot,it,at,!1,null,null,null),lt=nt.exports,ut=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"profilePage"},[t.modify?s("section",{staticClass:"profile"},[s("div",{staticClass:"profile__perso"},[t._m(0),s("div",{staticClass:"infos"},[s("div",{staticClass:"infos__name"},[s("p",[t._v(" "+t._s(t.lastName))]),s("p",[t._v(" "+t._s(t.firstName))])]),s("div",{staticClass:"infos__email"},[s("p",[t._v(" "+t._s(t.email))])]),s("div",{staticClass:"infos__button"},[s("button",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),t.ModifyUser()}}},[t._v("Modifier le profil")])])])]),s("div",{staticClass:"profile__content"},[s("div",{staticClass:"profile__content__posts"},[s("i",{staticClass:"fa fa-file-image",attrs:{"aria-hidden":"true"}}),s("p",[t._v(t._s(t.nbPosts)+" Posts")])]),s("div",{attrs:{id:"comments"}},[s("i",{staticClass:"fa fa-comment",attrs:{"aria-hidden":"true"}}),s("p",[t._v(t._s(t.nbComments)+" Commentaires")])]),s("div",{staticClass:"profile__content__likes"},[s("i",{staticClass:"fa fa-heart",attrs:{"aria-hidden":"true"}}),s("p",[t._v(t._s(t.nbLikes)+" Likes/Dislikes")])])])]):s("section",{staticClass:"profile"},[s("div",{staticClass:"profile__perso"},[t._m(1),s("div",{staticClass:"modify"},[s("div",{staticClass:"modify__name"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.lastName,expression:"lastName"}],attrs:{id:"lastname",type:"text"},domProps:{value:t.lastName},on:{input:function(e){e.target.composing||(t.lastName=e.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.firstName,expression:"firstName"}],attrs:{type:"text"},domProps:{value:t.firstName},on:{input:function(e){e.target.composing||(t.firstName=e.target.value)}}})]),s("div",{staticClass:"modify__email"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{id:"email",type:"text"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),s("div",{staticClass:"modify__button"},[s("div",{staticClass:"modify__button__1"},[s("button",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),t.UpdateUserRequest()}}},[t._v("Valider")])]),s("div",{staticClass:"modify__button__2"},[s("button",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),t.DeleteUserRequest()}}},[t._v("Supprimer")])])])])]),s("div",{staticClass:"profile__content"},[s("div",{staticClass:"profile__content__posts"},[s("i",{staticClass:"fa fa-file-image",attrs:{"aria-hidden":"true"}}),s("p",[t._v(t._s(t.nbPosts)+" Posts")])]),s("div",{attrs:{id:"comments"}},[s("i",{staticClass:"fa fa-comment",attrs:{"aria-hidden":"true"}}),s("p",[t._v(t._s(t.nbComments)+" Commentaires")])]),s("div",{staticClass:"profile__content__likes"},[s("i",{staticClass:"fa fa-heart",attrs:{"aria-hidden":"true"}}),s("p",[t._v(t._s(t.nbLikes)+" Likes/Dislikes")])])])])])},mt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"profile__perso__icon"},[s("i",{staticClass:"fa fa-user-circle",attrs:{"aria-hidden":"true"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"profile__perso__icon"},[s("i",{staticClass:"fa fa-user-circle",attrs:{"aria-hidden":"true"}})])}],ct={name:"ProfileView",data:function(){return{modify:!0,lastName:"",firstName:"",nbPosts:0,nbComments:0,nbLikes:0,email:""}},beforeCreate(){const t=JSON.parse(localStorage.getItem("user")),e=q().create({baseURL:"http://localhost:3000/"});e.defaults.headers.common["Authorization"]="Bearer "+t.token,t&&this.$store.state.user.userId==t.userId&&this.$route.params.id==t.userId?e.get("/user/"+this.$store.state.user.userId).then((t=>{this.lastName=t.data.lastName,this.firstName=t.data.firstName,this.email=t.data.email,this.nbPosts=t.data.posts.length,this.nbComments=t.data.comments.length,this.nbLikes=t.data.likes.length})).catch((t=>console.log(t))):this.$router.push("/")},computed:{},methods:{ModifyUser(){this.modify=!1},testEmail(){const t=/^(([^<>()\]\\.,;:\s@"]+(\.[^<>()\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return!!t.test(this.email)||(document.getElementById("email").value="L'email n'est pas valide!",!1)},nameExist(){return""!=this.lastName||(document.getElementById("lastname").placeholder="Votre nom est requis",document.getElementById("email").placeholder="Votre e-mail est requis",!1)},emailExist(){return""!=this.email||(document.getElementById("email").placeholder="Votre e-mail est requis",!1)},UpdateUserRequest(){if(this.nameExist()&&this.emailExist()&&this.testEmail()){const t=JSON.parse(localStorage.getItem("user")),e=q().create({baseURL:"http://localhost:3000/"});e.defaults.headers.common["Authorization"]="Bearer "+t.token;const s=this.$store.state.user.userId;e.put("/user/"+s,{lastName:this.lastName,firstName:this.firstName,email:this.email}).then((t=>{console.log(t.data),this.$router.push("/").then((()=>{this.$router.push("/profile/"+s)})).catch((t=>console.log({error:t})))})).catch((t=>console.log(t)))}},DeleteUserRequest(){const t=this.$route.params.id;this.$store.dispatch("DeleteUserRequest",t)}}},dt=ct,pt=(0,l.Z)(dt,ut,mt,!1,null,null,null),ht=pt.exports,ft=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",[s("section",[s("div",{staticClass:"title"},[s("h1",[t._v("Page administrateur")]),s("p",[t._v(t._s(this.$store.state.users.length)+" utilisateurs")])]),t._l(this.$store.state.users,(function(t,e){return s("User",{key:e,attrs:{id:t.id,firstName:t.firstName,lastName:t.lastName,email:t.email}})}))],2)])},_t=[],gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{attrs:{id:"card"}},[s("div",{staticClass:"userCard"},[s("div",{staticClass:"userCard__infos"},[s("div",{staticClass:"userCard__infos__names"},[s("p",[t._v(t._s(t.lastName))]),s("p",[t._v(t._s(t.firstName))])]),s("div",{staticClass:"userCard__infos__email"},[s("p",[t._v(t._s(t.email))])])]),s("div",{staticClass:"userCard__buttons"},[s("button",{staticClass:"btn btn-admin",on:{click:function(e){return e.preventDefault(),t.ActivityUser()}}},[t._v("Activités")]),t.isAdmin()?t._e():s("button",{staticClass:"btn btn-admin",on:{click:function(e){return e.preventDefault(),t.DeleteUser()}}},[t._v("Supprimer")])])])])},vt=[],Ct={name:"UserComp",data:function(){return{}},props:{id:{type:Number},firstName:{type:String},lastName:{type:String},email:{type:String}},methods:{DeleteUser(){const t=this.id;this.$store.dispatch("DeleteUserRequest",t)},ActivityUser(){alert("Bientôt disponible !")},isAdmin(){return 1==this.id}}},bt=Ct,yt=(0,l.Z)(bt,gt,vt,!1,null,null,null),kt=yt.exports,xt={name:"HomeView",components:{User:kt},data:function(){return{}},beforeCreate(){this.$store.dispatch("GetAllUsersRequest")}},Pt=xt,Nt=(0,l.Z)(Pt,ft,_t,!1,null,null,null),wt=Nt.exports,It=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},$t=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("img",{attrs:{src:s(6715),alt:""}})])}],qt={name:"NotFoundView"},Rt=qt,St=(0,l.Z)(Rt,It,$t,!1,null,"7f175ba2",null),Et=St.exports;const Dt=s(6166)["default"];i.Z.use(Q.ZP);const Lt=Dt.create({baseURL:"http://localhost:3000/"}),Ut=Dt.create({baseURL:"http://localhost:3000/",headers:{"Content-Type":"multipart/form-data"}}),Ot={userId:-1,token:""};let At=localStorage.getItem("user");At?(At=JSON.parse(At),Lt.defaults.headers.common["Authorization"]="Bearer "+At.token,Ut.defaults.headers.common["Authorization"]="Bearer "+At.token):At=Ot;var Vt=new Q.ZP.Store({state:{error:"",status:"",user:At,users:[{}],posts:[{}],post:{},comments:{},postIdComments:"",postUserId:"",postFirstName:"",postLastName:"",connected:!1},getters:{},mutations:{clearError(t){t.error=""},changeStatus(t,e){t.status=e},userLogin(t,e){Lt.defaults.headers.common["Authorization"]="Bearer "+e.token,Ut.defaults.headers.common["Authorization"]="Bearer "+e.token,t.user=e,localStorage.setItem("user",JSON.stringify(e))}},actions:{SignupRequest(t,e){t.commit("changeStatus","loading"),Lt.post("/signup",{firstName:e.firstName,lastName:e.lastName,email:e.email,password:e.password}).then((s=>{console.log("Inscription réussie",s),t.dispatch("LoginRequest",e),t.commit("changeStatus","created")})).catch((e=>{console.log("Inscription ratée",e),t.commit("changeStatus","error_signup")}))},LoginRequest(t,e){t.commit("clearError"),t.commit("changeStatus","loading"),Lt.post("/login",{email:e.email,password:e.password}).then((e=>{console.log("Connexion réussie"),t.commit("changeStatus","logged"),t.commit("userLogin",e.data),Mt.push("/")})).catch((e=>{console.log("Inconnexion réussie",e),this.state.error=e.response.data.error,t.commit("changeStatus","error_login")}))},deconnexion(t,e){t.commit("userLogin",e),t.commit("changeStatus",""),localStorage.removeItem("user"),t.state.user=Ot},GetAllUsersRequest(t){Lt.get("/users").then((e=>{t.state.users=e.data})).catch((t=>console.log(t)))},GetPostsRequest(t){Lt.get("/").then((e=>{t.state.posts=e.data})).catch((t=>console.log(t)))},GetPostRequest(t,e){Lt.get("/"+e).then((e=>{t.state.post=e.data})).catch((t=>console.log(t)))},PutPostRequest(t,e){Ut.put("/"+e.data.id,e.data).then((()=>Mt.push("/createPost").then((()=>{Mt.push("/")})))).catch((t=>console.log(t,"yeah")))},DeleteRequest(t,e){Lt.delete("/"+e.id).then((()=>Mt.push("/createPost").then((()=>{Mt.push("/")})))).catch((t=>console.log(t)))},PostPostRequest(t,e){Lt.post("/",e.data,{headers:{"Content-Type":"multipart/form-data"}}).then((()=>Mt.push("/"))).catch((t=>console.log(t)))},DeleteUserRequest(t,e){Lt.delete("/user/"+e).then((()=>{1==t.state.user.userId?Mt.push("/").then((()=>Mt.push("/users"))).catch((t=>console.log(t))):(localStorage.removeItem("user"),t.state.user=Ot,Mt.push("/login"))})).catch((t=>console.log(t)))},CreateCommentRequest(t,e){Lt.post("/"+e.PostId+"/comment",{PostId:e.PostId,text:e.text}).then((()=>Mt.push("/createPost").then((()=>{Mt.push("/")})))).catch((t=>console.log(t)))},GetCommentsRequest(t,e){Lt.get("/"+e+"/comments").then((e=>{t.state.comments=e})).catch((t=>console.log(t,"Insuccès de lappel des commentaires")))},LikePostRequest(t,e){Lt.post("/"+e.id+"/like",{like:e.like}).then((()=>{Mt.push("/createpost").then((()=>{Mt.push("/")}))})).catch((t=>console.log(t)))}},modules:{}});i.Z.use(c.Z);const Zt=[{path:"/",name:"Home",component:A},{path:"/login",name:"Login",component:J},{path:"/signup",name:"Signup",component:X},{path:"/profile/:id",name:"Profile",component:ht,props:!0},{path:"/createpost",name:"Create",component:lt},{path:"/post/:id",name:"Post",component:st},{path:"/users",name:"Admin",component:wt,beforeEnter(t,e,s){t.name,e.name;const i=JSON.parse(localStorage.getItem("user"));1!==i.userId?s("/"):s(!0)}},{path:"*",name:"All",component:Et}],Bt=new c.Z({routes:Zt,mode:"history"});Bt.beforeEach(((t,e,s)=>{const i=Vt.state.user,a=JSON.parse(localStorage.getItem("user"));e.name,"Login"!==t.name&&"Signup"!==t.name?-1==i.userId?s("/login"):a&&i.userId==a.userId?s(!0):s("/login"):s(!a||"/")}));var Mt=Bt;i.Z.config.productionTip=!1,new i.Z({router:Mt,store:Vt,render:t=>t(m)}).$mount("#app")},5515:function(t,e,s){t.exports=s.p+"img/black-logo.e2e5ae92.png"},3649:function(t,e,s){t.exports=s.p+"img/icon-white.7d488b0c.png"},6715:function(t,e,s){t.exports=s.p+"img/not-found.138fe649.jpg"}},e={};function s(i){var a=e[i];if(void 0!==a)return a.exports;var r=e[i]={exports:{}};return t[i](r,r.exports,s),r.exports}s.m=t,function(){var t=[];s.O=function(e,i,a,r){if(!i){var o=1/0;for(m=0;m<t.length;m++){i=t[m][0],a=t[m][1],r=t[m][2];for(var n=!0,l=0;l<i.length;l++)(!1&r||o>=r)&&Object.keys(s.O).every((function(t){return s.O[t](i[l])}))?i.splice(l--,1):(n=!1,r<o&&(o=r));if(n){t.splice(m--,1);var u=a();void 0!==u&&(e=u)}}return e}r=r||0;for(var m=t.length;m>0&&t[m-1][2]>r;m--)t[m]=t[m-1];t[m]=[i,a,r]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.p="/P7-Deployement/"}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var a,r,o=i[0],n=i[1],l=i[2],u=0;if(o.some((function(e){return 0!==t[e]}))){for(a in n)s.o(n,a)&&(s.m[a]=n[a]);if(l)var m=l(s)}for(e&&e(i);u<o.length;u++)r=o[u],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(m)},i=self["webpackChunkvue_frontend"]=self["webpackChunkvue_frontend"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(4282)}));i=s.O(i)})();
//# sourceMappingURL=app.3f903355.js.map